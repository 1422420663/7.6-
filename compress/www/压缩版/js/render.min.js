function counter(e,t){if(e.parents(".product").prev()[0].checked){var n=1*$(".money").text(),o=1*e.parent().prev().children("b").html().slice(1);t?n+=o:n-=o,$(".money").html(n.toFixed(1))}}$(".reduce").on("touchend",function(){var e=1*$(this).next().html();--e<0?e=0:counter($(this),!1),$(this).next().html(e)}),$(".add").on("touchend",function(){var e=1*$(this).prev().html();e++,$(this).prev().html(e),counter($(this),!0)}),$("ul").on("touchend",".select",function(){var e=1*$(".money").text(),t=$(this).next().find(".price b").text().slice(1),n=$(this).next().find("strong").text();$(this)[0].checked?e-=t*n:e+=t*n,$(".money").text(e.toFixed(1))}),$("#all").on("touchend",function(){var e=0;$(this)[0].checked?($(".select").removeAttr("checked"),$("footer .money").text(0)):($(".select").attr("checked",!0),$.each($(".select"),function(t,n){var o=$(n).next().find(".price b").text().slice(1),i=$(n).next().find("strong").text();e+=o*i}),$("footer .money").text(e))}),$(".del").on("touchend",function(){$(this).parents("li").remove()}),function(e){function t(e,t,n,o){return Math.abs(e-t)>=Math.abs(n-o)?e-t>0?"Left":"Right":n-o>0?"Up":"Down"}function n(){s=null,h.last&&(h.el.trigger("longTap"),h={})}function o(){s&&clearTimeout(s),s=null}function i(){u&&clearTimeout(u),a&&clearTimeout(a),l&&clearTimeout(l),s&&clearTimeout(s),u=a=l=s=null,h={}}function r(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function c(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var u,a,l,s,p,h={};e(document).ready(function(){var d,f,g,m,x=0,$=0;"MSGesture"in window&&((p=new MSGesture).target=document.body),e(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&(h.el.trigger("swipe"),h.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(t){(m=c(t,"down"))&&!r(t)||(g=m?t:t.touches[0],t.touches&&1===t.touches.length&&h.x2&&(h.x2=void 0,h.y2=void 0),d=Date.now(),f=d-(h.last||d),h.el=e("tagName"in g.target?g.target:g.target.parentNode),u&&clearTimeout(u),h.x1=g.pageX,h.y1=g.pageY,f>0&&f<=250&&(h.isDoubleTap=!0),h.last=d,s=setTimeout(n,750),p&&m&&p.addPointer(t.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(m=c(e,"move"))&&!r(e)||(g=m?e:e.touches[0],o(),h.x2=g.pageX,h.y2=g.pageY,x+=Math.abs(h.x1-h.x2),$+=Math.abs(h.y1-h.y2))}).on("touchend MSPointerUp pointerup",function(n){(m=c(n,"up"))&&!r(n)||(o(),h.x2&&Math.abs(h.x1-h.x2)>30||h.y2&&Math.abs(h.y1-h.y2)>30?l=setTimeout(function(){h.el&&(h.el.trigger("swipe"),h.el.trigger("swipe"+t(h.x1,h.x2,h.y1,h.y2))),h={}},0):"last"in h&&(x<30&&$<30?a=setTimeout(function(){var t=e.Event("tap");t.cancelTouch=i,h.el&&h.el.trigger(t),h.isDoubleTap?(h.el&&h.el.trigger("doubleTap"),h={}):u=setTimeout(function(){u=null,h.el&&h.el.trigger("singleTap"),h={}},250)},0):h={}),x=$=0)}).on("touchcancel MSPointerCancel pointercancel",i),e(window).on("scroll",i)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(Zepto);